import{r as e,u as X,U as C,Q as a,j as Y,d as i}from"./index-123bf382.js";import{f as Z,a as T}from"./resources-40b856d9.js";const ee=e.createContext();function ae({children:w}){const{id:S}=X(),[b,j]=e.useState(!0),[k,r]=e.useState(!1),[E,$]=e.useState(""),[g,l]=e.useState(C),[y,f]=e.useState(C),[h,n]=e.useState(C),[c,d]=e.useState(""),[m,u]=e.useState(""),[P,p]=e.useState(""),[O,x]=e.useState("#388cdc"),[D,q]=e.useState(Z()),[_,A]=e.useState(T()),[R,U]=e.useState(T()),[B,H]=e.useState(2),[v,N]=e.useState(null),I=e.useRef(null),J=e.useRef(null);async function F(){r(!0);try{const t=await fetch(`${i}/cancell/scheduling?id=${E}&date=${D}`),{ok:s,error:o}=await t.json();if(s)return a(s,{position:"top-left",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});a.error(o)}catch(t){a.error(t)}finally{r(!1)}}async function L(){r(!0);try{const t=await fetch(`${i}/save/reg`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({person:g,name:m,doctype:y,doc:c,facultie:h,asunt:P,color:O,date:D,start:_,end:R,status:B})}),{ok:s,error:o}=await t.json();if(s)return l("unset"),d(""),f("unset"),u(""),n("unset"),p(""),a(s,{position:"top-left",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),!0;a.error(o)}catch(t){a.error(t)}finally{r(!1)}}async function Q(){r(!0);try{const t=await fetch(`${i}/update/reg`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:S,person:g,name:m,doctype:y,doc:c,facultie:h,asunt:P})}),{ok:s,error:o}=await t.json();if(s)return l("unset"),d(""),f("unset"),u(""),n("unset"),p(""),a(s,{position:"top-left",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});a.error(o)}catch(t){a.error(t)}finally{r(!1)}}async function z(){const s=await(await fetch(`${i}/get/staffdeans/itfip`)).json();N(s)}async function G(){const t=await fetch(`${i}/get/person/one?id=${S}`),{person_type:s,id_doc:o,facultad:K,name:M,num_doc:V,text_asunt:W}=await t.json();l(s),f(o),n(K),u(M),d(V),p(W)}return e.useEffect(()=>{S&&G()},[]),e.useEffect(()=>{if(v){for(const t of v)if(t.cc===c){u(t.name),n(t.facultie),a("Datos autocompletados autom√°ticamente",{position:"top-left",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});break}}},[c]),Y(ee.Provider,{value:{disabledAll:b,setDisabledAll:j,loadEventsRef:J,loading:k,person:g,setPerson:l,doctype:y,setDoctype:f,facultie:h,setFacultie:n,doc:c,setDoc:d,name:m,setName:u,asunt:P,setAsunt:p,color:O,setColor:x,setDate:q,setStart:A,setEnd:U,setStatus:H,facultieSelectRef:I,schedulePerson:L,editPerson:Q,cancellSchedule:F,staffDeans:v,getStaffDeans:z,setEventId:$},children:w})}export{ae as P,ee as a};
