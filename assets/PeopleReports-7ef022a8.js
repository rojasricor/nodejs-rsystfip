import{a,j as e,r as s,U as i,R as D,L as E,o as w,p as $,q as y,d as C}from"./index-123bf382.js";import{g as k,b as A}from"./resources-40b856d9.js";function x({report:n}){return a("tr",{children:[e("td",{children:n.name}),e("td",{children:n.date}),e("td",{children:n.time}),e("td",{children:n.presence_count}),e("td",{children:n.absence_count}),e("td",{children:n.person})]})}function T(){const[n,p]=s.useState([]),[d,u]=s.useState([]),[g,h]=s.useState([]),[c,b]=s.useState(k()),[o,f]=s.useState(A()),[l,N]=s.useState(i),[v,R]=s.useState("");async function m(){const t=await fetch(`${C}/get/reports?start=${c}&end=${o}&category=${l}`),{reports:r,linkReport:S}=await t.json();u(r),h(r),R(S)}return s.useEffect(()=>{document.title="RSystfip | Generate reports",m(),fetch(`${D}?resource=categories`).then(t=>t.json()).then(t=>p(t))},[]),s.useEffect(()=>m,[c,o]),s.useEffect(()=>{h(l!==i?d.filter(({id_person:t})=>t==l):d)},[l]),e("div",{className:"row",children:a("div",{className:"col-12",children:[e("h1",{className:"h3",children:"Reportes por mes"}),a("div",{className:"row g-3",children:[a("div",{className:"col-md-2",children:[e("label",{className:"form-label",children:"Desde:"}),e("input",{onChange:t=>b(t.target.value),type:"date",value:c,className:"form-control"})]}),a("div",{className:"col-md-2",children:[e("label",{className:"form-label",children:"Hasta:"}),e("input",{onChange:t=>f(t.target.value),type:"date",value:o,className:"form-control"})]}),a("div",{className:"col-md-2",children:[e("label",{className:"form-label",children:"Persona:"}),a("select",{onChange:t=>N(t.target.value),className:"form-select",children:[e("option",{value:i,children:"No seleccionado"}),n.map((t,r)=>e("option",{value:t.id,children:t.person},r))]})]}),e("div",{className:"col-12",children:a("div",{className:"btn-group btn-group-sm",children:[a(E,{to:"/people/statistics",className:"btn btn-warning text-light",title:"Generar estadísticas",children:["Estadísticas ",e(w,{})]}),a("button",{onClick:()=>{window.open(`${$.concat(v)}?start=${c}&end=${o}&category=${l}`)},className:"btn btn-dark",title:"Reporte PDF",children:["Descargar ",e(y,{})]})]})})]}),e("div",{className:"table-responsive mt-5",children:a("table",{className:"table table-hover table-borderless table-sm text-center",children:[e("caption",{children:"Datos sobre las personas agendadas este mes."}),e("thead",{children:a("tr",{children:[e("th",{children:"Nombres"}),e("th",{children:"Fecha"}),e("th",{children:"Últ. Modificación"}),e("th",{children:"Agendamiento programado"}),e("th",{children:"Agendamiento de una sóla vez"}),e("th",{children:"Tipo Persona"})]})}),e("tbody",{children:g.map((t,r)=>e(x,{report:t},r))})]})})]})})}export{T as default};
