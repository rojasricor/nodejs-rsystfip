import{r as o,a as t,j as e,L as d,B as m,c as u,d as c,Q as i,I as b,k as f}from"./index-123bf382.js";function p({user:r}){const[a,s]=o.useState(!1);async function n({id:h}){if(confirm("Seguro(a) de eliminar ese usuario?"))try{if(!(await fetch(`${c}/delete/user?role=${h}`)).json())return i.error("Error al eliminar");i("Usuario eliminado exitosamente",{position:"top-left",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),s(!0)}catch(l){i.error(l)}}return a?null:t("tr",{children:[e("td",{children:r.email}),t("td",{children:[e(d,{to:`/users/manage/password/${r.id}/change`,className:"btn btn-light border m-1",title:`Change password for user ${r.email}`,children:e(m,{className:"mb-1"})}),e("button",{onClick:()=>n(r),className:r.id!==3?"btn btn-danger border m-1":"btn btn-danger border disabled m-1",title:`Delete user ${r.email} (Requires confirmation)`,children:e(u,{className:"mb-1"})})]})]})}function x(){const[r,a]=o.useState([]);return o.useEffect(()=>{document.title="RSystfip | Administrate users",fetch(`${c}/get/users/manage`).then(s=>s.json()).then(s=>a(s))},[]),e("div",{className:"row",children:e("div",{className:"col-md-6 mx-auto",children:t("div",{className:"card card-body",children:[e("h1",{className:"h3 text-center",children:"Administrar usuarios"}),e("div",{className:"col-md-12",children:e(d,{to:"add",className:"btn btn-dark btn-sm text-light mb-2 mt-2",children:e(b,{})})}),t("table",{className:"table table-hover table-striped text-center",children:[e("caption",{children:"Usuarios con acceso."}),e("thead",{children:t("tr",{children:[e("th",{children:"Correo institucional"}),e("th",{children:"Acciones"})]})}),e("tbody",{children:r.map((s,n)=>e(p,{user:s},n))})]}),e(f,{})]})})})}export{x as default};
