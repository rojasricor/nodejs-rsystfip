import{u as y,r,j as e,a as s,k as S,F as _,B as j,S as q,d as g,Q as o}from"./index-123bf382.js";function P(){const{role:n}=y(),[l,b]=r.useState([]),[c,i]=r.useState(""),[d,u]=r.useState(""),[m,f]=r.useState(""),[p,h]=r.useState(!1);r.useEffect(()=>{document.title="RSystfip | Change password users"},[]);async function C(){const t=await(await fetch(`${g}/get/users/one?role=${n}`)).json();b(t)}r.useEffect(()=>{C()},[n]);async function N(a){a.preventDefault(),h(!0);try{const t=await fetch(`${g}/update/password`,{method:"POST",headers:{"Content-Type":"application/javascript"},body:JSON.stringify({id:l.id,current_password:c,new_password:d,new_password_confirm:m})}),{error:w,ok:v}=await t.json();return w?o.error(w):(i(""),u(""),f(""),o(v,{position:"top-left",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}))}catch(t){o.error(t)}finally{h(!1)}}return e("div",{className:"row",children:e("div",{className:"col-md-4 mx-auto",children:s("form",{onSubmit:N,className:"card card-body",children:[s("h1",{className:"h3 text-center",children:["Cambiar contraseña para ",l.email]}),s("div",{className:"form-floating mb-3 mt-3",children:[e("input",{onChange:a=>i(a.target.value),value:c,className:"form-control",type:"password",placeholder:"Current password",autoComplete:"off",required:!0}),e("label",{className:"form-label",children:"Contraseña anterior:"})]}),s("div",{className:"form-floating mb-3",children:[e("input",{onChange:a=>u(a.target.value),value:d,className:"form-control",type:"password",placeholder:"New password",autoComplete:"off",required:!0}),e("label",{className:"form-label",children:"Contraseña nueva:"})]}),s("div",{className:"form-floating mb-3",children:[e("input",{onChange:a=>f(a.target.value),value:m,className:"form-control",type:"password",placeholder:"Confirm new password",autoComplete:"off",required:!0}),e("label",{className:"form-label",children:"Confirmar contraseña nueva:"})]}),e(S,{}),e("button",{className:"w-100 btn btn-primary btn-lg mb-3",disabled:p,children:p?e(q,{tam:"lg"}):s(_,{children:["Cambiar contraseña ",e(j,{className:"mb-1"})]})})]})})})}export{P as default};
